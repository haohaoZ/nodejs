<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link rel='stylesheet' href='/stylesheets/showgoodsstyle.css' />
    <script src="/js/jquery-1.11.1.min.js"></script>
  </head>
  <body>
  	<header>
  		<div>
  			<input type="text" id="infor"/>
  			<input type="button" value="搜索" id="search"/>
  		</div>
  	</header>
  	<main>
  		<table id="tab">
  			<tr>
  				<th>
  					<input type="checkbox" />
  					<span>编号</span>
  				</th>
  				<th>商品名称</th>
  				<th>货号</th>
  				<th>价格</th>
  				<th>上架</th>
  				<th>精品</th>
  				<th>新品</th>
  				<th>热销</th>
  				<th>推荐排序</th>
  				<th>库存</th>
  				<th>虚拟销量</th>
  				<th>操作</th>
  			</tr>
  			<% for(var i=0;i<list.length;i++) { %>
  			<tr>
  				<td>
  					<input type="checkbox" />
  					<span>01</span>
  				</td>
  				<td><%= list[i].goods_name %></td>
  				<td><%= list[i].goods_id %></td>
  				<td><%= list[i].price %></td>
  				<td></td>
  				<td></td>
  				<td></td>
  				<td></td>
  				<td>1</td>
  				<td>99</td>
  				<td><%= list[i].sales_num %></td>
  				<td></td> 
  			</tr>
				<% } %>
  		</table>
  	</main>
  	<footer >
  		<input type="text" id="count" value="15"/>
  		<select id="page">
  		</select>
  	</footer>
  </body>
</html>
<script>
	//添加页数
	function paging(){
		var trLong=$("#tab").children(0).children().length-1;
		var count=$("#count").val();
		var pages=Math.ceil(trLong/count);
		$("#page").html("");
		for(var i=0;i<pages;i++){
			var oOp=$("<option>");
			oOp.html(i+1);
			$("#page").append(oOp);
		}
	}
	//显示商品
	function show(){
		var trLong=$("#tab").children(0).children().length-1;
		var count=$("#count").val();
		var page=$("#page").val();
		var countMax=count*page>trLong?trLong:count*page;
		$("#tab").children(0).children().eq(0).siblings().css({display:"none"});
		for(var i=count*(page-1)+1;i<=countMax;i++){
			$("#tab").children(0).children().eq(i).css({display:"table-row"});
		}
	}
	//翻页
	$("#page").on("change",function(){
		show();
	})
	//改变每页商品数量
	$("#count").on("keydown",function(evt){
		var e=evt||event;
		if(e.keyCode==13){
			paging();
			show();
		}
	})
	//搜索商品
	$("#search").on("click",function(){
		var infor=$("#infor").val();
		$
	})
	//初始化显示商品
	paging();
	show();
</script>